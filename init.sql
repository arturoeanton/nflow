CREATE TABLE IF NOT EXISTS "api_tokens" (
  "id" SERIAL PRIMARY KEY,
  "name" char(200) NOT NULL,
  "token" text NOT NULL,
  "start" timestamp DEFAULT current_timestamp,
  "expired" integer,
  "active" boolean,
  "header" char(150),
  "token_type" char(150)
);

CREATE TABLE IF NOT EXISTS "modules" (
  "id" SERIAL PRIMARY KEY,
  "name" text NOT NULL,
  "form" text NOT NULL,
  "mod" text NOT NULL,
  "code" text
);

CREATE TABLE IF NOT EXISTS "nflow" (
  "id" SERIAL PRIMARY KEY,
  "name" text NOT NULL,
  "json" text NOT NULL,
  "default_js" text,
  "tag" varchar(200)
);

CREATE TABLE IF NOT EXISTS "queries" (
  "id" SERIAL PRIMARY KEY,
  "name" varchar(200) NOT NULL,
  "query" text NOT NULL
);

CREATE TABLE IF NOT EXISTS "template" (
  "id" SERIAL PRIMARY KEY,
  "name" varchar(200) NOT NULL,
  "content" text NOT NULL
);

CREATE TABLE IF NOT EXISTS "tracker" (
  "id" SERIAL PRIMARY KEY,
  "log_id" text,
  "box_id" text,
  "box_name" text,
  "box_type" text,
  "url" text,
  "username" text,
  "connection_next" text,
  "duration" text,
  "created" timestamp DEFAULT current_timestamp,
  "order_box" integer,
  "payload" text,
  "ip" char(128),
  "real_ip" char(128),
  "user_agent" char(800),
  "query_param" text,
  "hostname" char(500),
  "host" char(500)
);

CREATE TABLE IF NOT EXISTS "users" (
  "id" SERIAL PRIMARY KEY,
  "username" varchar(200) NOT NULL,
  "password" varchar(200) NOT NULL,
  "rol" varchar(200) NOT NULL,
  "active" boolean
);

-- Inserts de api_tokens
INSERT INTO public.api_tokens (id, name, token, start, expired, active, header, token_type) VALUES (DEFAULT, 'api1', 'AAAAAAAAAAAAAAAAAAAAAMLheAAAAAAA0%2BuSeid%2BULvsea4JtiGRiSDSJSI%3DEUifiRBkKG5E2XzMDjRfl76ZC9Ub0wnz4XsNiRVBChTYbJcE3F', '2023-08-08 20:26:57', 1691669083, true, 'Authorization', 'Bearer');
INSERT INTO public.api_tokens (id, name, token, start, expired, active, header, token_type) VALUES (DEFAULT, 'api1', 'ZGV2MTpkZXYx', '2023-08-09 19:16:59', NULL, true, 'Authorization', 'Basic');

-- Inserts de modules
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, '_end', '<hr>

<!-- add your form -->
    ', '{
    "title": "End",
    "in": 1,
    "out": null,
    "icon": "",
    "boxcolor": "darkorange",
    "custom": false,
    "param": {
        "type": "js",
        "script": "_end"
    }
}', 'function main(){
  c.JSON(200,{})
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, '_goroutine', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr/>', '{
    "title": "Parallel",
    "in": 1,
    "out": 2,
    "icon": "share",
    "custom": false,
    "editable":false,
    "boxcolor": "darkmagenta",
    "fontcolor": "white",
    "param": {
        "type": "gorutine",
        "name_box":"",
        "nflow_auth":"false"
    }
}', NULL);
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, '_js_code', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr/>
    <textarea class="hide_component" name="code" df-code></textarea>
    <button class="btn-export" name="open" onclick=''open_coder(this)''> CODE </button>', '{
    "title": "JS Code",
    "icon": "source",
    "in": 1,
    "out": -1,
    "custom":false,
    "editable":false,
    "boxcolor": "darkred",
    "fontcolor": "white",
    "param": {
        "type":"js",
        "code":"",
        "name_box":"",
        "nflow_auth":"false"
    }
}', NULL);
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, '_start_form', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<div class="nflow_auth">Auth:<input type="checkbox" df-nflow_auth="false" name="nflow_auth"></div>
<hr/>
<p>Url</p>
<input type="text"  name="urlpattern" df-urlpattern>
<button  class="btn-export" onclick=''setFieldNode();save();window.open(window.location+"/.."+getElemenByNameOfChiled(this.parentElement,"urlpattern")[0].value)''> OPEN </button>', '{
    "title": "Form Start",
    "in": 0,
    "out": 1,
    "icon": "video_settings",
    "custom": false,
    "editable":false,
    "boxcolor": "darkcyan",
    "fontcolor": "white",
    "param": {
        "type": "starter",
        "method": "ANY",
        "urlpattern":"",
        "name_box":"",
        "nflow_auth":"false",
		"reset_order_box":"true"
    }
}', NULL);
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'js_foreach', 'js_foreach', '{
    "title": "For each",
    "in": 1,
    "out": 2,
    "icon": "",
    "boxcolor": "darkred",
    "custom": false,
    "param": {
        "type": "js",
        "script": "js_foreach"
    }
}', 'function main(){
  try{
    if (payload["__foreach"] == undefined || payload["__foreach"] == null){
      payload["__foreach"] = find_element(nflow_data["field"], payload)
    }
  	var current_list = payload["__foreach"]
    console.log("*>"+current_list.length)
    if (current_list.length == 0){
      next="output_1"
      return
    }
    next = "output_2"
    payload[nflow_data["item_name"]] = current_list.shift()
    payload["__foreach"]=current_list
	console.log("+>"+payload["__foreach"].length)
  }catch(e){
    next="output_1"
    return
  }
} ');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, '_start_http', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<div class="nflow_auth">Auth:<input type="checkbox" df-nflow_auth="false" name="nflow_auth"></div>
<hr/>
<p>Url</p>
<input type="text"  name="urlpattern" df-urlpattern>

<p>Choose Method:</p>
<select name="method" df-method>
  <option value="GET">GET</option>
  <option value="POST">POST</option>
  <option value="PUT">PUT</option>
  <option value="PATCH">PATCH</option>
  <option value="DELETE">DELETE</option>
  <option value="ANY">ANY</option>
</select>
<button  class="btn-export" onclick=''setFieldNode();save();window.open(window.location+"/.."+getElemenByNameOfChiled(this.parentElement,"urlpattern")[0].value)''> OPEN </button>
</div>', '{
    "title": "Http Start",
    "in": 0,
    "out": 1,
    "icon": "http",
    "custom": false,
    "editable":false,
    "boxcolor": "darkcyan",
    "fontcolor": "white",
    "param": {
        "type": "starter",
        "method": "ANY",
        "urlpattern":"",
        "name_box":"",
        "nflow_auth":"false"
    }
}', NULL);
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'form', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>

<!-- add your form -->
<textarea class="hide_component" name="html_form" df-html_form="<div><input type=''input'' name=''n1''/><input type=''submit''/></div>"> </textarea>
<button class="btn-export" onclick="open_coder(this, `htmlmixed`)"> CODE</button>
<input type="hidden" df-template="form1" name="template">

<select name="templateui" onchange="document.querySelector(''#panel_prop > div > div.box > input[name=\''template\'']'').value = this.value">
</select>
<button class="" onclick="open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\''template\'']'').value)"> Template Code</button>
<br><br>
<button class="" onclick="var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}"> New Template </button>

<button class="" onclick="if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\''template\'']'').value )}">
  Remove Template</button>

<script id="script_prop">
fetch("/nflow/templates")
    .then(response => response.json())
    .then(data => {
        var s = document.querySelector("#panel_prop > div > div.box > select[name=''templateui'']")
		var val = editor.getNodeFromId(id_box_in_prop).data["template"]
        console.log("Val:"+val);
        for (var i in data){
            var item = data[i]
            var checked= undefined;
            if (item["name"] == val){
              checked = true;
            }
            s.add(new Option(item["name"], item["name"]),checked)
            console.log(item)
        }
  		s.value=val
  	
  	});
</script>', '{
    "title": "Form",
    "in": 1,
    "out": 1,
    "icon": "book",
    "boxcolor": "darkorange",
    "custom": false,
    "param": {
        "name_box": "",
        "html_form": "<div><input type=''input'' name=''n1''/><input type=''submit''/></div>",
        "template": "form1",
        "type": "js",
        "script": "form"
    }
}', 'function main(){
  var action = "/nflow/node/run/"+__flow_name+"/"+__outputs["output_1"]
  var html_form = dromedary_data["html_form"]
  var template1 = dromedary_data["template"]  
  var code = template(html_form,{
        form_code:html_form, 
        action:action,
    	next:__outputs["output_1"],
    	payload:payload,
    	profile:get_profile()
  });
  var html = template(get_template(template1), 
  {
        form_code:code, 
        action:action,
    	next:__outputs["output_1"],
    	payload:payload,
    	profile:get_profile()
  });
  c.HTML(200,html)
  
  if (payload == undefined || payload == null){
    payload = {}
  }
  payload["break"] = true
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'js_set_var', 'Description:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>

<!-- add your form -->
Name:<input type="text" name="var_name" df-var_name="name1" class="nflow_field"> <br>
Value:<input type="text" name="var_value" df-var_value="" class="nflow_field"><br>
    ', '{
    "title": "Set Variable",
    "in": 1,
    "out": 1,
    "icon": "",
    "boxcolor": "darkred",
    "custom": false,
    "param": {
        "name_box": "",
        "var_name": "name1",
        "var_value": "",
        "type": "js",
        "script": "js_set_var"
    }
}', 'function main(){
  if (payload == undefined || payload == null ) {
    payload = {}
  }
  payload[nflow_data["var_name"]] = nflow_data["var_value"]
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'if_major', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>
<!-- add your form -->
Field:<input type="text" name="field" df-field="" class="nflow_field"><br>
Limit:<input type="number" name="limit" df-limit="0" class="nflow_field">    ', '{
    "title": "if higher/lower",
    "in": 1,
    "out": 2,
    "icon": "",
    "boxcolor": "darkred",
    "custom": false,
    "param": {
        "name_box": "",
        "field": "",
        "limit": "0",
        "type": "js",
        "script": "if_major"
    }
}', 'function main(){
  if (parseFloat(payload[nflow_data["field"]]) > parseFloat(nflow_data["limit"])){
    next= "output_1"
    return
  } 
  next="output_2"
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'if_equals', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>
<!-- add your form -->
Field:<input type="text" name="field" df-field="" class="nflow_field"><br>
Value:<input type="text" name="value" df-value="" class="nflow_field">    ', '{
    "title": "if equals",
    "in": 1,
    "out": 2,
    "icon": "",
    "boxcolor": "darkred",
    "custom": false,
    "param": {
        "name_box": "",
        "field": "",
        "value": "",
        "type": "js",
        "script": "if_equals"
    }
}', 'function main(){
  if (payload[nflow_data["field"]] == nflow_data["value"]){
    next= "output_1"
    return
  } 
  next="output_2"
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'json', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>
<input type="text" name="field" df-field="">
<input type="number" name="http_code" df-http_code="200">', '{
    "title": "JSON Render",
    "in": 1,
    "out": 0,
    "icon": "source",
    "boxcolor": "darkviolet",
    "custom": false,
    "param": {
        "field": "",
        "http_code": "200",
        "type": "js",
        "script": "json",
        "name_box": ""
    }
}', 'function main(){
    var code = 200
    if (nflow_data["http_code"] != ""){
        code = parseInt(nflow_data["http_code"])
    }
    if (nflow_data["field"] == undefined || nflow_data["field"] =="" || nflow_data["field"] =="*"){
        c.JSON(code, payload)
        return
    }
    c.JSON(code,find_element(nflow_data["field"],payload))
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'parser_query_param', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>
 
<!-- add your form -->
', '{
    "title": "Param to Payload",
    "in": 1,
    "out": 1,
    "icon": "filter_alt",
    "boxcolor": "darkred",
    "custom": false,
    "param": {
        "name_box": "",
        "type": "js",
        "script": "parser_query_param"
    }
}', 'function main (){
    if (payload == undefined){
      payload = {}
    } 
    var params = url_values_to_map(c.QueryParams())
    for (key in params){
      payload[key] = c.QueryParam(key)
    }
  }');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'mustache', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>

<!-- add your form -->
    
<textarea class="hide_component" name="template" df-template=""></textarea>
<button class="btn-export" onclick="open_coder(this, `htmlmixed`)"> CODE </button>', '{
    "title": "Mustache",
    "in": 1,
    "out": 0,
    "icon": "code",
    "boxcolor": "darkorange",
    "custom": false,
    "param": {
        "name_box": "",
        "nflow_auth": "false",
        "template": "",
        "type": "js",
        "script": "mustache"
    }
}', 'function main(){
    console.log(JSON.stringify(payload))
    c.HTML(200, mustache(dromedary_data["template"], payload))
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'Logout', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>

<!-- add your form -->
    ', '{
    "title": "logout",
    "in": 1,
    "out": 1,
    "icon": "",
    "boxcolor": "darkorange",
    "custom": false,
    "param": {
        "name_box": "",
        "type": "js",
        "script": "Logout"
    }
}', 'function main(){
  delete_profile()
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'template', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>

<!-- add your form -->
<textarea class="hide_component" name="template" df-template=""></textarea>
<button class="btn-export" onclick="open_coder(this, `htmlmixed`)"> CODE </button>', '{
    "title": "Template",
    "in": 1,
    "out": 0,
    "icon": "code",
    "boxcolor": "darkorange",
    "custom": false,
    "param": {
        "name_box": "",
        "nflow_auth": "false",
        "template": "",
        "type": "js",
        "script": "template"
    }
}', 'function main(){
    console.log(JSON.stringify(payload))
    c.HTML(200, template(dromedary_data["template"], payload))
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'Validate Login', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>', '{
    "title": "Validate Login",
    "in": 1,
    "out": null,
    "icon": "",
    "boxcolor": "darkorange",
    "custom": false,
    "param": {
        "name_box": "",
        "type": "js",
        "script": "Validate Login"
    }
}', 'function main(){
  	var url_back = ""+get_session("auth-session","redirect_url")
  	var flag = false
  	if (validate_user(payload["username"] ,payload["username"] )) {
      	set_profile({"username":payload["username"]})
  		return c.HTML(200," <script>window.location.href = ''"+url_back+"''</script>")
    }
    return c.HTML(200," Error Login <br/>  <a href=''/home'' >Home</a>")

}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'ValidateToken1', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>

<!-- add your form -->
    ', '{
    "title": "Validate Token",
    "in": 1,
    "out": 1,
    "icon": "",
    "boxcolor": "darkorange",
    "custom": false,
    "param": {
        "name_box": "",
        "type": "js",
        "script": "ValidateToken1"
    }
}', 'function main(){
  next= "output_1"
 
  if (!validate_token("api1")){
    c.JSON(401,{"error":"Unauthorized"})
    next= "break"
  }
  
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'twilio_send_sms', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>

<!-- add your form -->
<br>
Enter the name of the payload variable where the phone will arrive (by default it is "phone") 
<br><br>
Variable Name: <input type="text" name="variable" df-variable="" class="nflow_field">', '{
    "title": "Twilio Send SMS",
    "in": 1,
    "out": 2,
    "icon": "",
    "boxcolor": "darkred",
    "custom": false,
    "param": {
        "name_box": "",
        "variable": "",
        "type": "js",
        "script": "twilio_send_sms"
    }
}', 'function main(){
  const phone = nflow_data["variable"] || "phone";
  payload["twilio_phone"] = payload[phone];
  const send = send_otp(payload[phone]);
  if(send){
    next = "output_1";
  }else{
    next = "output_2";
  } 
}');
INSERT INTO public.modules (id, name, form, mod, code) VALUES (DEFAULT, 'twilio_validate_sms', 'Name:<input type="text" name="name_box" df-name_box="" class="nflow_field">
<hr>

<!-- add your form -->
<br>
Enter the name of the payload variable where the code will arrive (by default it is "code") 
<br><br>
Variable Name: <input type="text" name="variable" df-variable="" class="nflow_field">', '{
    "title": "Twilio Validate SMS",
    "in": 1,
    "out": 2,
    "icon": "",
    "boxcolor": "darkred",
    "custom": false,
    "param": {
        "name_box": "",
        "variable": "",
        "type": "js",
        "script": "twilio_validate_sms"
    }
}', 'function main(){
  const code = nflow_data["variable"] || "code";
  const valid = check_otp(payload["twilio_phone"],payload[code]);
  if(valid){
    next = "output_1";
  }else{
    next = "output_2";
  }
}');

-- Inserts de nflow
INSERT INTO public.nflow (id, name, json, default_js, tag) VALUES (DEFAULT, 'app', '{    "drawflow": {        "": {            "data": {}        },        "Home": {            "data": {                "19ad1116-1095-421b-870c-2b8808490039": {                    "class": "",                    "data": {                        "html_form": "{{index .profile \"username\"}}\n<div>\n  <input type=''input'' name=''n1''/>\n  <input type=''input'' name=''n3''/>\n  <input type=''submit''/>\n</div> ",                        "name_box": "",                        "nflow_auth": "false",                        "script": "form",                        "template": "form1.html",                        "type": "js"                    },                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"input\" df-template=\"form1.html\" name=\"template\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "id": "19ad1116-1095-421b-870c-2b8808490039",                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "name": "",                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -9477,                    "pos_y": -9819,                    "typenode": false                },                "5e9ff886-4991-4795-89c9-e02bb71bd6ed": {                    "class": "",                    "data": {                        "name_box": "",                        "nflow_auth": "false",                        "script": "Validate Login",                        "type": "js"                    },                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div>Validate Login</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> Validate Login</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr>\n\n<!-- add your form -->\n    \n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "id": "5e9ff886-4991-4795-89c9-e02bb71bd6ed",                    "inputs": {},                    "name": "",                    "outputs": {},                    "pos_x": -9141,                    "pos_y": -9371,                    "typenode": false                },                "de5bcff2-76b7-4cc9-b970-84b0dcfaeeee": {                    "class": "",                    "data": {                        "code": "function main(){\n  \tconsole.log(\"paso\")\n\tpayload[\"n1\"] = payload[\"n1\"] + \"_! modificado por js jeje\"\n  \tpayload[\"otro_campo\"] = \"agregado por js.\"\n  \n}",                        "name_box": "",                        "nflow_auth": "false",                        "type": "js"                    },                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div><span class=\"material-icons\">source</span>JS Code</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JS Code</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n    <textarea class=\"hide_component\" name=\"code\" df-code></textarea>\n    <button class=\"btn-export\" name=\"open\" onclick=''open_coder(this)''> CODE </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "id": "de5bcff2-76b7-4cc9-b970-84b0dcfaeeee",                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "name": "",                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -9240,                    "pos_y": -9821,                    "typenode": false                },                "f51a1499-7246-4ed0-84f9-4df8c9d61e81": {                    "class": "",                    "data": {                        "html_form": "{{index .profile \"username\"}}\n<div>\n  <input type=''input'' name=''n1''/>\n  <input type=''input'' name=''n3''/>\n  <input type=''submit''/>\n</div> ",                        "name_box": "",                        "nflow_auth": "false",                        "script": "form",                        "template": "form1.html",                        "type": "js"                    },                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"input\" df-template=\"form1.html\" name=\"template\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "id": "f51a1499-7246-4ed0-84f9-4df8c9d61e81",                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "name": "",                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -9230,                    "pos_y": -9818,                    "typenode": false                },                "b0d21122-2e47-4bcc-9d7b-0fc94cc6bee2": {                    "id": "b0d21122-2e47-4bcc-9d7b-0fc94cc6bee2",                    "data": {                        "method": "ANY",                        "name_box": "/pepe sin login",                        "nflow_auth": "false",                        "type": "starter",                        "urlpattern": "/pepe11"                    },                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkcyan;\"></div><span class=\"material-icons\">video_settings</span>Form Start</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"video_settings\"></i> Form Start</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n<p>Url</p>\n<input type=\"text\"  name=\"urlpattern\" df-urlpattern>\n<button  class=\"btn-export\" onclick=''setFieldNode();save();window.open(window.location+\"/..\"+getElemenByNameOfChiled(this.parentElement,\"urlpattern\")[0].value)''> OPEN </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {},                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "590d1a17-da21-44c6-8629-c123bd2cea19",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 60,                    "pos_y": 525                },                "fb3e4212-7c40-45ca-89b8-d5e8f3cd79fc": {                    "id": "fb3e4212-7c40-45ca-89b8-d5e8f3cd79fc",                    "name": "json",                    "data": {                        "field": "",                        "http_code": "200",                        "name_box": "done",                        "script": "json",                        "type": "js"                    },                    "class": "json",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkviolet;\"></div><span class=\"material-icons\">source</span>JSON Render</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JSON Render</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n<input type=\"text\" name=\"field\" df-field=\"\">\n<input type=\"number\" name=\"http_code\" df-http_code=\"200\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "24c2bafe-1111-4732-86cc-3b695b579c37",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {},                    "pos_x": 2050,                    "pos_y": 450                },                "8d8e901c-3c4d-45fb-9a7e-c0af4f5e57bc": {                    "id": "8d8e901c-3c4d-45fb-9a7e-c0af4f5e57bc",                    "name": "",                    "data": {                        "field": "Done",                        "http_code": "200",                        "script": "json",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkviolet;\"></div><span class=\"material-icons\">source</span>JSON Render</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JSON Render</div>\n\t\t<div class=\"box\">\n\t\t  <input type=\"text\" name=\"field\" df-field=\"\">\n<input type=\"number\" name=\"http_code\" df-http_code=\"200\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {},                    "pos_x": -8367,                    "pos_y": -9731                },                "d784ae92-a0c3-4dba-831b-80e9b2a86dda": {                    "id": "d784ae92-a0c3-4dba-831b-80e9b2a86dda",                    "name": "",                    "data": {                        "field": "Done",                        "http_code": "200",                        "script": "json",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkviolet;\"></div><span class=\"material-icons\">source</span>JSON Render</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JSON Render</div>\n\t\t<div class=\"box\">\n\t\t  <input type=\"text\" name=\"field\" df-field=\"\">\n<input type=\"number\" name=\"http_code\" df-http_code=\"200\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {},                    "pos_x": -8379,                    "pos_y": -9720                },                "9d50be67-3a6a-4890-ad31-ebe6cf77f796": {                    "id": "9d50be67-3a6a-4890-ad31-ebe6cf77f796",                    "name": "_start_form",                    "data": {                        "method": "ANY",                        "name_box": "Start",                        "nflow_auth": "true",                        "reset_order_box": "true",                        "type": "starter",                        "urlpattern": "/home"                    },                    "class": "_start_form",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkcyan;\"></div><span class=\"material-icons\">video_settings</span>Form Start</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"video_settings\"></i> Form Start</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n<p>Url</p>\n<input type=\"text\"  name=\"urlpattern\" df-urlpattern>\n<button  class=\"btn-export\" onclick=''setFieldNode();save();window.open(window.location+\"/..\"+getElemenByNameOfChiled(this.parentElement,\"urlpattern\")[0].value)''> OPEN </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {},                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "590d1a17-da21-44c6-8629-c123bd2cea19",                                    "output": "input_1",                                    "points": []                                }                            ]                        }                    },                    "pos_x": 50,                    "pos_y": 360                },                "69e791a9-0d6f-4e7c-880f-4f2fc73c47bd": {                    "id": "69e791a9-0d6f-4e7c-880f-4f2fc73c47bd",                    "name": "",                    "data": {                        "html_form": "<div>\n  User:<input type=''input'' name=''username''/><br/>\n  Passwrod:<input type=''password'' name=''password''/><br/>\n  <input type=''submit'' value=\"Login\"/>\n</div>",                        "name_box": "Form",                        "script": "form",                        "template": "login_template",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"input\" df-template=\"form1.html\" name=\"template\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -8868,                    "pos_y": -9743                },                "8da0710d-4553-4e28-9c1f-ef3adf80566f": {                    "id": "8da0710d-4553-4e28-9c1f-ef3adf80566f",                    "name": "",                    "data": {                        "html_form": "<div>\n  User:<input type=''input'' name=''username''/><br/>\n  Passwrod:<input type=''password'' name=''password''/><br/>\n  <input type=''submit'' value=\"Login\"/>\n</div>",                        "name_box": "Form",                        "script": "form",                        "template": "login_template",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"input\" df-template=\"form1.html\" name=\"template\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -8868,                    "pos_y": -9743                },                "05a6aa10-2362-48a4-b5bd-6aef3f11a11b": {                    "id": "05a6aa10-2362-48a4-b5bd-6aef3f11a11b",                    "name": "",                    "data": {                        "html_form": "<div>\n  User:<input type=''input'' name=''username''/><br/>\n  Passwrod:<input type=''password'' name=''password''/><br/>\n  <input type=''submit'' value=\"Login\"/>\n</div>",                        "name_box": "Form",                        "script": "form",                        "template": "login_template",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"input\" df-template=\"form1.html\" name=\"template\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -8808,                    "pos_y": -9745                },                "20e8fd4c-467e-455d-8341-e6891bbbc3df": {                    "id": "20e8fd4c-467e-455d-8341-e6891bbbc3df",                    "name": "",                    "data": {                        "html_form": "<div>\n  <input type=''input'' name=''n1''/>\n  <input type=''input'' name=''n3''/>\n  <input type=''submit''/>\n  Nuevo\n</div>",                        "name_box": "Form Datos1",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": ""                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -9235,                    "pos_y": -9864                },                "ec98d614-cd5b-41b9-9268-c58f957d0e83": {                    "id": "ec98d614-cd5b-41b9-9268-c58f957d0e83",                    "name": "",                    "data": {                        "html_form": "<div>\n  <input type=''input'' name=''n1''/>\n  <input type=''input'' name=''n3''/>\n  <input type=''submit''/>\n  Nuevo\n</div>",                        "name_box": "Form Datos1",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": ""                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -8964,                    "pos_y": -9844                },                "1a4f2557-6063-499a-8863-eec03b6212d6": {                    "id": "1a4f2557-6063-499a-8863-eec03b6212d6",                    "name": "",                    "data": {                        "html_form": "<div>\n  <input type=''input'' name=''n1''/>\n  <input type=''input'' name=''n3''/>\n  <input type=''submit''/>\n  Nuevo\n</div>",                        "name_box": "Form Datos1",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": ""                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -8692,                    "pos_y": -9827                },                "1a478067-71bb-4133-8dea-835ab8357795": {                    "id": "1a478067-71bb-4133-8dea-835ab8357795",                    "name": "",                    "data": {                        "html_form": "<div>\n  User:<input type=''input'' name=''username''/><br/>\n  Passwrod:<input type=''password'' name=''password''/><br/>\n  <input type=''submit'' value=\"Login\"/>\n</div>",                        "name_box": "form login",                        "script": "form",                        "template": "login_template",                        "type": "js",                        "templateui": ""                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -9465,                    "pos_y": -9116                },                "590d1a17-da21-44c6-8629-c123bd2cea19": {                    "id": "590d1a17-da21-44c6-8629-c123bd2cea19",                    "name": "form",                    "data": {                        "html_form": "Paso 1:<br>\n<div>\n  <label for=\"nombre\">Nombre:</label>\n  <input type=\"text\" id=\"nombre\" name=\"nombre\" required>\n  <!-- Agregar ms campos segn sea necesario -->\n  <input type=\"submit\" value=\"Siguiente\">\n\n</div>",                        "name_box": "Datos Personales",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": "form1"                    },                    "class": "form",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "9d50be67-3a6a-4890-ad31-ebe6cf77f796",                                    "input": "output_1"                                },                                {                                    "node": "b0d21122-2e47-4bcc-9d7b-0fc94cc6bee2",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "012715af-7917-4a12-8afc-b5f5406d4094",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 310,                    "pos_y": 450                },                "012715af-7917-4a12-8afc-b5f5406d4094": {                    "id": "012715af-7917-4a12-8afc-b5f5406d4094",                    "name": "",                    "data": {                        "html_form": "Paso 2:<br><div>\n  <label for=\"tipo\">Verificar por:</label>\n  <select id=\"tipo\" name=\"tipo\" required onchange=\"toggleInput()\">\n    <option value=\"\" disabled selected>Seleccionar</option>\n    <option value=\"celular\">Celular</option>\n    <option value=\"mail\">Mail</option>\n  </select>\n\n  <div id=\"celularDiv\" style=\"display:none;\">\n    <label for=\"celular\">Nmero de celular:</label>\n    <input type=\"tel\" id=\"celular\" name=\"celular\">\n  </div>\n\n  <div id=\"mailDiv\" style=\"display:none;\">\n    <label for=\"mail\">Correo electrnico:</label>\n    <input type=\"email\" id=\"mail\" name=\"mail\">\n  </div>\n\n  <input type=\"submit\" value=\"Siguiente\">\n</div>\n\n<script>\n  function toggleInput() {\n    var tipo = document.getElementById(''tipo'').value;\n    document.getElementById(''celularDiv'').style.display = (tipo === ''celular'') ? ''block'' : ''none'';\n    document.getElementById(''mailDiv'').style.display = (tipo === ''mail'') ? ''block'' : ''none'';\n    \n    // Aqu podras tambin hacer requeridos los campos dependiendo de la seleccin\n    document.getElementById(''celular'').required = (tipo === ''celular'');\n    document.getElementById(''mail'').required = (tipo === ''mail'');\n  }\n</script>",                        "name_box": "Paso 2",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": "form1"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "590d1a17-da21-44c6-8629-c123bd2cea19",                                    "input": "output_1"                                },                                {                                    "node": "01fcfeeb-4d8c-4852-af73-3c410a4dd354",                                    "input": "output_2"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "f4592e20-307d-488d-8df0-2dc6a7409e64",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 560,                    "pos_y": 450                },                "92886a75-5b38-43de-8b7d-6ba9ba05726a": {                    "id": "92886a75-5b38-43de-8b7d-6ba9ba05726a",                    "name": "",                    "data": {                        "html_form": "Paso 3 - Celular:<br>\n<div>\n    <label for=\"codigo\">Cdigo de verificacin:</label>\n    <input type=\"text\" id=\"codigo\" name=\"codigo\" required>\n    <input type=\"submit\" value=\"Siguiente\">\n</div>",                        "name_box": "Paso 3 Celular",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": "form1"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "7231ae61-3658-48bc-8653-8944cf337530",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "01fcfeeb-4d8c-4852-af73-3c410a4dd354",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 1287,                    "pos_y": 313                },                "937b61f6-4b0c-467f-b336-fe2233252d8c": {                    "id": "937b61f6-4b0c-467f-b336-fe2233252d8c",                    "name": "",                    "data": {                        "html_form": "Paso 3 - Mail:<br>\n<div>\n    <label for=\"codigo\">Cdigo de verificacin:</label>\n    <input type=\"text\" id=\"codigo\" name=\"codigo\" required>\n    <input type=\"submit\" value=\"Siguiente\">\n</div>",                        "name_box": "Paso 3.Mail",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": "form1"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "99fb5dbc-43fa-4fa3-b9c3-2e125b480aa8",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "01fcfeeb-4d8c-4852-af73-3c410a4dd354",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 1289,                    "pos_y": 514                },                "7231ae61-3658-48bc-8653-8944cf337530": {                    "id": "7231ae61-3658-48bc-8653-8944cf337530",                    "name": "",                    "data": {                        "name_box": "fork Celular",                        "nflow_auth": "false",                        "type": "gorutine"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkmagenta;\"></div><span class=\"material-icons\">share</span>Parallel</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"share\"></i> Parallel</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "f4592e20-307d-488d-8df0-2dc6a7409e64",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "92886a75-5b38-43de-8b7d-6ba9ba05726a",                                    "output": "input_1"                                }                            ]                        },                        "output_2": {                            "connections": [                                {                                    "node": "7d18e9b5-3533-4c4c-91c1-f6d90b27f77e",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 1049,                    "pos_y": 363                },                "58f92637-9ef0-4c82-8ca0-0023c2576ded": {                    "id": "58f92637-9ef0-4c82-8ca0-0023c2576ded",                    "name": "",                    "data": {                        "name_box": "fork",                        "nflow_auth": "false",                        "type": "gorutine"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkmagenta;\"></div><span class=\"material-icons\">share</span>Parallel</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"share\"></i> Parallel</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        },                        "output_2": {                            "connections": []                        }                    },                    "pos_x": -8719,                    "pos_y": -9886                },                "7d18e9b5-3533-4c4c-91c1-f6d90b27f77e": {                    "id": "7d18e9b5-3533-4c4c-91c1-f6d90b27f77e",                    "name": "",                    "data": {                        "code": "function main(){\n  console.log(\"Enviando codigo - \"+JSON.stringify(payload))\n}",                        "name_box": "Envio SMS",                        "nflow_auth": "false",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div><span class=\"material-icons\">source</span>JS Code</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JS Code</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n    <textarea class=\"hide_component\" name=\"code\" df-code></textarea>\n    <button class=\"btn-export\" name=\"open\" onclick=''open_coder(this)''> CODE </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "7231ae61-3658-48bc-8653-8944cf337530",                                    "input": "output_2"                                }                            ]                        }                    },                    "outputs": {},                    "pos_x": 1285,                    "pos_y": 402                },                "c0687576-f866-467f-8cf2-530cf98460b3": {                    "id": "c0687576-f866-467f-8cf2-530cf98460b3",                    "name": "",                    "data": {                        "code": "function main(){\n  console.log(\"aca\")\n}",                        "name_box": "second",                        "nflow_auth": "false",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div><span class=\"material-icons\">source</span>JS Code</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JS Code</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n    <textarea class=\"hide_component\" name=\"code\" df-code></textarea>\n    <button class=\"btn-export\" name=\"open\" onclick=''open_coder(this)''> CODE </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {},                    "pos_x": -8623,                    "pos_y": -9772                },                "99fb5dbc-43fa-4fa3-b9c3-2e125b480aa8": {                    "id": "99fb5dbc-43fa-4fa3-b9c3-2e125b480aa8",                    "name": "",                    "data": {                        "name_box": "fork Mail",                        "nflow_auth": "false",                        "type": "gorutine"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkmagenta;\"></div><span class=\"material-icons\">share</span>Parallel</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"share\"></i> Parallel</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "f4592e20-307d-488d-8df0-2dc6a7409e64",                                    "input": "output_2"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "937b61f6-4b0c-467f-b336-fe2233252d8c",                                    "output": "input_1"                                }                            ]                        },                        "output_2": {                            "connections": [                                {                                    "node": "040ce079-1e50-4fbc-8597-73b49ad8abd8",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 1046,                    "pos_y": 552                },                "040ce079-1e50-4fbc-8597-73b49ad8abd8": {                    "id": "040ce079-1e50-4fbc-8597-73b49ad8abd8",                    "name": "",                    "data": {                        "code": "function main(){\n  console.log(\"Enviando mail - \"+JSON.stringify(payload))\n}",                        "name_box": "Envio Mail",                        "nflow_auth": "false",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div><span class=\"material-icons\">source</span>JS Code</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JS Code</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n    <textarea class=\"hide_component\" name=\"code\" df-code></textarea>\n    <button class=\"btn-export\" name=\"open\" onclick=''open_coder(this)''> CODE </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "99fb5dbc-43fa-4fa3-b9c3-2e125b480aa8",                                    "input": "output_2"                                }                            ]                        }                    },                    "outputs": {},                    "pos_x": 1288,                    "pos_y": 603                },                "24c2bafe-1111-4732-86cc-3b695b579c37": {                    "id": "24c2bafe-1111-4732-86cc-3b695b579c37",                    "name": "",                    "data": {                        "html_form": "<style>\n  body {\n    font-family: Arial, sans-serif;\n  }\n  #form4 {\n    background: #ffffff;\n    padding: 20px;\n    border-radius: 10px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  }\n  label {\n    font-weight: bold;\n    display: block;\n    margin-bottom: 8px;\n  }\n  input[type=\"number\"],\n  input[type=\"text\"] {\n    width: 100%;\n    padding: 10px;\n    margin-bottom: 20px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n  }\n  input[type=\"submit\"] {\n    background-color: #007bff;\n    color: #ffffff;\n    padding: 12px 20px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n  }\n  input[type=\"submit\"]:hover {\n    background-color: #0056b3;\n  }\n</style>\n\n\nPaso 4:<br>\n<div id=\"form4\">\n  <label for=\"cantidad\">Cantidad de dinero prestada:</label>\n  <input type=\"number\" id=\"cantidad\" name=\"cantidad\" required>\n\n  <label for=\"cuotas\">Nmero de Cuotas (Min: <span id=\"minCuotas\"></span>, Max: <span id=\"maxCuotas\"></span>):</label>\n  <input type=\"number\" id=\"cuotas\" name=\"cuotas\" required >\n\n\n  <label for=\"interes\">Inters:</label>\n  <input type=\"text\" id=\"interes\" name=\"interes\" readonly>\n\n  <label for=\"valorCuota\">Valor de cada cuota:</label>\n  <input type=\"text\" id=\"valorCuota\" name=\"valorCuota\" readonly>\n\n  <label for=\"valorTotal\">Valor total de las cuotas:</label>\n  <input type=\"text\" id=\"valorTotal\" name=\"valorTotal\" readonly>\n\n  <input type=\"submit\" value=\"Finalizar\">\n</div>\n\n\n\n<script>\n  const MIN_C = 1; // Mnimo de cuotas\n  const MAX_C = 36; // Mximo de cuotas\n  cuotas.value = MIN_C;\n  document.getElementById(''minCuotas'').textContent = MIN_C;\n  document.getElementById(''maxCuotas'').textContent = MAX_C;\n\n  document.getElementById(''cuotas'').addEventListener(''input'', calcularCuotasYInteres);\n  document.getElementById(''cantidad'').addEventListener(''input'', calcularCuotasYInteres);\n\n  function calcularCuotasYInteres() {\n    var cuotas = parseInt(document.getElementById(''cuotas'').value);\n    var cantidad = parseFloat(document.getElementById(''cantidad'').value);\n    \n    if (cuotas < MIN_C || cuotas > MAX_C || isNaN(cuotas) || isNaN(cantidad)) {\n      alert(\"Por favor, ingrese una cantidad y cuotas vlidas.\");\n      return;\n    }\n\n    var interes = calcularInteres(cuotas);\n    var valorInteres = interes * cantidad;\n    var valorTotal = cantidad + valorInteres;\n    var valorCuota = valorTotal / cuotas;\n\n    document.getElementById(''interes'').value = valorInteres.toFixed(2);\n    document.getElementById(''valorCuota'').value = valorCuota.toFixed(2);\n    document.getElementById(''valorTotal'').value = valorTotal.toFixed(2);\n  }\n\n  function calcularInteres(cuotas) {\n    if (cuotas <= 3) return 0.05;\n    if (cuotas <= 6) return 0.10;\n    if (cuotas <= 12) return 0.20;\n    if (cuotas <= 24) return 0.50;\n    return 1; // Puedes ajustar este valor segn tus necesidades\n  }\n</script>",                        "name_box": "Paso 4",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": "form1"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "01fcfeeb-4d8c-4852-af73-3c410a4dd354",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "fb3e4212-7c40-45ca-89b8-d5e8f3cd79fc",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 1810,                    "pos_y": 450                },                "5ce783df-89e5-43bf-8533-bbe261b6d8e5": {                    "id": "5ce783df-89e5-43bf-8533-bbe261b6d8e5",                    "name": "",                    "data": {                        "html_form": "Paso 3 - Celular:<br>\n<div>\n    <label for=\"codigo\">Cdigo de verificacin:</label>\n    <input type=\"text\" id=\"codigo\" name=\"codigo\" required>\n    <input type=\"submit\" value=\"Siguiente\">\n</div>",                        "name_box": "Paso 3.Celular",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": ""                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -8234,                    "pos_y": -9973                },                "01fcfeeb-4d8c-4852-af73-3c410a4dd354": {                    "id": "01fcfeeb-4d8c-4852-af73-3c410a4dd354",                    "name": "",                    "data": {                        "code": "function main(){\n  \tconsole.log(\"validacion codigo\")\n  \tconsole.log(JSON.stringify(payload))\n  \tif (payload[\"codigo\"]  != \"1111\") {\n      next = \"output_2\"\n    }\n  \tpayload[\"paso_codigo\"] = \"ok\"\n  \n  \t\n  \n}",                        "name_box": "Validacion Tipo",                        "nflow_auth": "false",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div><span class=\"material-icons\">source</span>JS Code</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JS Code</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n    <textarea class=\"hide_component\" name=\"code\" df-code></textarea>\n    <button class=\"btn-export\" name=\"open\" onclick=''open_coder(this)''> CODE </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "937b61f6-4b0c-467f-b336-fe2233252d8c",                                    "input": "output_1"                                },                                {                                    "node": "92886a75-5b38-43de-8b7d-6ba9ba05726a",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "24c2bafe-1111-4732-86cc-3b695b579c37",                                    "output": "input_1"                                }                            ]                        },                        "output_2": {                            "connections": [                                {                                    "node": "012715af-7917-4a12-8afc-b5f5406d4094",                                    "output": "input_1",                                    "points": [                                        {                                            "pos_x": 1755,                                            "pos_y": 751                                        },                                        {                                            "pos_x": 550,                                            "pos_y": 750                                        }                                    ]                                }                            ]                        }                    },                    "pos_x": 1560,                    "pos_y": 450                },                "ae837f90-dd22-4ddd-ab92-115a8c115bd3": {                    "id": "ae837f90-dd22-4ddd-ab92-115a8c115bd3",                    "name": "",                    "data": {                        "field": "codigo",                        "name_box": "Validacion Codigo",                        "script": "if_equals",                        "type": "js",                        "value": "1111"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div>if equals</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> if equals</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n<!-- add your form -->\nField:<input type=\"text\" name=\"field\" df-field=\"\" class=\"nflow_field\"><br>\nValue:<input type=\"text\" name=\"value\" df-value=\"\" class=\"nflow_field\">    \n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        },                        "output_2": {                            "connections": []                        }                    },                    "pos_x": -8515,                    "pos_y": -10019                },                "2c543d74-e5d8-4755-bf89-edb2ee8496bc": {                    "id": "2c543d74-e5d8-4755-bf89-edb2ee8496bc",                    "name": "",                    "data": {                        "code": "function main(){\n  \tconsole.log(\" Payload:\" +JSON.stringify(payload))\n  \n  \n  \t\n  \n}",                        "name_box": "",                        "nflow_auth": "false",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div><span class=\"material-icons\">source</span>JS Code</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JS Code</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n    <textarea class=\"hide_component\" name=\"code\" df-code></textarea>\n    <button class=\"btn-export\" name=\"open\" onclick=''open_coder(this)''> CODE </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": -8261,                    "pos_y": -9989                },                "5a73e0e1-d997-4a80-8784-be30339a6885": {                    "id": "5a73e0e1-d997-4a80-8784-be30339a6885",                    "name": "",                    "data": {                        "name_box": "fork Celular",                        "nflow_auth": "false",                        "type": "gorutine"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkmagenta;\"></div><span class=\"material-icons\">share</span>Parallel</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"share\"></i> Parallel</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        },                        "output_2": {                            "connections": []                        }                    },                    "pos_x": -8751,                    "pos_y": -9951                },                "d0dcf80c-4e7a-46ec-8e17-59cfc4473454": {                    "id": "d0dcf80c-4e7a-46ec-8e17-59cfc4473454",                    "name": "",                    "data": {                        "name_box": "fork Mail",                        "nflow_auth": "false",                        "type": "gorutine"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkmagenta;\"></div><span class=\"material-icons\">share</span>Parallel</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"share\"></i> Parallel</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        },                        "output_2": {                            "connections": []                        }                    },                    "pos_x": -8766,                    "pos_y": -9775                },                "ece14675-0797-469f-8cd3-4aa88d56a1fc": {                    "id": "ece14675-0797-469f-8cd3-4aa88d56a1fc",                    "name": "",                    "data": {                        "name_box": "fork Mail",                        "nflow_auth": "false",                        "type": "gorutine"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkmagenta;\"></div><span class=\"material-icons\">share</span>Parallel</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"share\"></i> Parallel</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        },                        "output_2": {                            "connections": []                        }                    },                    "pos_x": -8686,                    "pos_y": -9883                },                "8d562c8e-dddc-469e-929c-1490c6963dc6": {                    "id": "8d562c8e-dddc-469e-929c-1490c6963dc6",                    "name": "",                    "data": {                        "name_box": "fork Mail",                        "nflow_auth": "false",                        "type": "gorutine"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkmagenta;\"></div><span class=\"material-icons\">share</span>Parallel</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"share\"></i> Parallel</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr/>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {                        "output_1": {                            "connections": []                        },                        "output_2": {                            "connections": []                        }                    },                    "pos_x": -8651,                    "pos_y": -9830                },                "dd511c62-23c3-442a-ae40-4833f504067b": {                    "id": "dd511c62-23c3-442a-ae40-4833f504067b",                    "name": "",                    "data": {                        "script": "_end",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div>End</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> End</div>\n\t\t<div class=\"box\">\n\t\t  <hr>\n\n<!-- add your form -->\n    \n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": []                        }                    },                    "outputs": {},                    "pos_x": -9482,                    "pos_y": -9560                },                "f4592e20-307d-488d-8df0-2dc6a7409e64": {                    "id": "f4592e20-307d-488d-8df0-2dc6a7409e64",                    "name": "if_equals",                    "data": {                        "field": "tipo",                        "name_box": "Validacion Tipo",                        "script": "if_equals",                        "type": "js",                        "value": "celular"                    },                    "class": "if_equals",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div>if equals</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> if equals</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n<!-- add your form -->\nField:<input type=\"text\" name=\"field\" df-field=\"\" class=\"nflow_field\"><br>\nValue:<input type=\"text\" name=\"value\" df-value=\"\" class=\"nflow_field\">    \n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "012715af-7917-4a12-8afc-b5f5406d4094",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "7231ae61-3658-48bc-8653-8944cf337530",                                    "output": "input_1"                                }                            ]                        },                        "output_2": {                            "connections": [                                {                                    "node": "99fb5dbc-43fa-4fa3-b9c3-2e125b480aa8",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 810,                    "pos_y": 450                }            }        },        "Login": {            "data": {                "9a28df0c-691b-4985-ae49-1735c0b4b050": {                    "id": "9a28df0c-691b-4985-ae49-1735c0b4b050",                    "name": "",                    "data": {                        "method": "ANY",                        "name_box": "Login",                        "nflow_auth": "false",                        "type": "starter",                        "urlpattern": "/nflow_login"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkcyan;\"></div><span class=\"material-icons\">video_settings</span>Form Start</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"video_settings\"></i> Form Start</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n<p>Url</p>\n<input type=\"text\"  name=\"urlpattern\" df-urlpattern>\n<button  class=\"btn-export\" onclick=''setFieldNode();save();window.open(window.location+\"/..\"+getElemenByNameOfChiled(this.parentElement,\"urlpattern\")[0].value)''> OPEN </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {},                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "5507c0cf-dd5f-4d45-8375-b17cf09f9ef5",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 450,                    "pos_y": 165                },                "130b08b8-9107-4ec3-9a3c-035561aa07a0": {                    "id": "130b08b8-9107-4ec3-9a3c-035561aa07a0",                    "name": "",                    "data": {                        "method": "ANY",                        "name_box": "Logout",                        "nflow_auth": "false",                        "type": "starter",                        "urlpattern": "/logout"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkcyan;\"></div><span class=\"material-icons\">video_settings</span>Form Start</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"video_settings\"></i> Form Start</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n<p>Url</p>\n<input type=\"text\"  name=\"urlpattern\" df-urlpattern>\n<button  class=\"btn-export\" onclick=''setFieldNode();save();window.open(window.location+\"/..\"+getElemenByNameOfChiled(this.parentElement,\"urlpattern\")[0].value)''> OPEN </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {},                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "bd719875-e1f7-4ac5-8f34-a2bdb511cff3",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 450,                    "pos_y": 285                },                "5507c0cf-dd5f-4d45-8375-b17cf09f9ef5": {                    "id": "5507c0cf-dd5f-4d45-8375-b17cf09f9ef5",                    "name": "",                    "data": {                        "html_form": "<div>\n  Username:<input type=\"text\" name=\"username\" required/>\n  Password:<input type=\"password\" name=\"password\" required/>\n  <input type=\"submit\" value=\"Login\"/>\n</div>",                        "name_box": "form login",                        "script": "form",                        "template": "login_template",                        "type": "js",                        "templateui": "login_template"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "9a28df0c-691b-4985-ae49-1735c0b4b050",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "60135809-d795-4e1a-a9b0-81c5c8ae0bfd",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 700,                    "pos_y": 165                },                "60135809-d795-4e1a-a9b0-81c5c8ae0bfd": {                    "id": "60135809-d795-4e1a-a9b0-81c5c8ae0bfd",                    "name": "",                    "data": {                        "name_box": "Validate Login",                        "script": "Validate Login",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div>Validate Login</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> Validate Login</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n    \n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "5507c0cf-dd5f-4d45-8375-b17cf09f9ef5",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {},                    "pos_x": 930,                    "pos_y": 165                },                "bd719875-e1f7-4ac5-8f34-a2bdb511cff3": {                    "id": "bd719875-e1f7-4ac5-8f34-a2bdb511cff3",                    "name": "",                    "data": {                        "name_box": "logout",                        "script": "Logout",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div>logout</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> logout</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n    \n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "130b08b8-9107-4ec3-9a3c-035561aa07a0",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "1c7bd5a6-a85f-453e-9023-087122661d2d",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 700,                    "pos_y": 285                },                "1c7bd5a6-a85f-453e-9023-087122661d2d": {                    "id": "1c7bd5a6-a85f-453e-9023-087122661d2d",                    "name": "",                    "data": {                        "html_form": "<form method=\"GET\" action=\"/home\">\n  \t<input type=\"submit\" value=\"Home\" />\n</form>",                        "name_box": "logout_form",                        "script": "form",                        "template": "logout_template",                        "type": "js",                        "templateui": "logout_template"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "bd719875-e1f7-4ac5-8f34-a2bdb511cff3",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "bff5d2e7-9a22-4c6d-8a0f-75db3f1182cd",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 930,                    "pos_y": 285                },                "bff5d2e7-9a22-4c6d-8a0f-75db3f1182cd": {                    "id": "bff5d2e7-9a22-4c6d-8a0f-75db3f1182cd",                    "name": "",                    "data": {                        "script": "_end",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div>End</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> End</div>\n\t\t<div class=\"box\">\n\t\t  <hr>\n\n<!-- add your form -->\n    \n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "1c7bd5a6-a85f-453e-9023-087122661d2d",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {},                    "pos_x": 1160,                    "pos_y": 285                }            }        },        "Examples": {            "data": {                "4143304b-6bb9-4f9f-83b8-36f74a147b2b": {                    "id": "4143304b-6bb9-4f9f-83b8-36f74a147b2b",                    "name": "",                    "data": {                        "method": "ANY",                        "name_box": "",                        "nflow_auth": "false",                        "type": "starter",                        "urlpattern": "/login_flow21"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkcyan;\"></div><span class=\"material-icons\">http</span>Http Start</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"http\"></i> Http Start</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n<p>Url</p>\n<input type=\"text\"  name=\"urlpattern\" df-urlpattern>\n\n<p>Choose Method:</p>\n<select name=\"method\" df-method>\n  <option value=\"GET\">GET</option>\n  <option value=\"POST\">POST</option>\n  <option value=\"PUT\">PUT</option>\n  <option value=\"PATCH\">PATCH</option>\n  <option value=\"DELETE\">DELETE</option>\n  <option value=\"ANY\">ANY</option>\n</select>\n<button  class=\"btn-export\" onclick=''setFieldNode();save();window.open(window.location+\"/..\"+getElemenByNameOfChiled(this.parentElement,\"urlpattern\")[0].value)''> OPEN </button>\n</div>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {},                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "ae2c4cf1-2cd1-4f66-a288-9095b0665cb7",                                    "output": "input_1",                                    "points": []                                }                            ]                        }                    },                    "pos_x": 415,                    "pos_y": 220                },                "ae2c4cf1-2cd1-4f66-a288-9095b0665cb7": {                    "id": "ae2c4cf1-2cd1-4f66-a288-9095b0665cb7",                    "name": "",                    "data": {                        "code": "function main(){\n\tc.JSON(200,{\"idp\":\"nflow2\", \"ss\":\"sss\"\n              })\n}",                        "name_box": "pepe",                        "nflow_auth": "false",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div><span class=\"material-icons\">source</span>JS Code</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JS Code</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n    <textarea class=\"hide_component\" name=\"code\" df-code></textarea>\n    <button class=\"btn-export\" name=\"open\" onclick=''open_coder(this)''> CODE </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "4143304b-6bb9-4f9f-83b8-36f74a147b2b",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {},                    "pos_x": 680,                    "pos_y": 220                },                "4f953c34-019c-4586-875d-72c3171f22f3": {                    "id": "4f953c34-019c-4586-875d-72c3171f22f3",                    "name": "",                    "data": {                        "method": "ANY",                        "name_box": "",                        "nflow_auth": "false",                        "type": "starter",                        "urlpattern": "/login_flow1"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkcyan;\"></div><span class=\"material-icons\">http</span>Http Start</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"http\"></i> Http Start</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n<p>Url</p>\n<input type=\"text\"  name=\"urlpattern\" df-urlpattern>\n\n<p>Choose Method:</p>\n<select name=\"method\" df-method>\n  <option value=\"GET\">GET</option>\n  <option value=\"POST\">POST</option>\n  <option value=\"PUT\">PUT</option>\n  <option value=\"PATCH\">PATCH</option>\n  <option value=\"DELETE\">DELETE</option>\n  <option value=\"ANY\">ANY</option>\n</select>\n<button  class=\"btn-export\" onclick=''setFieldNode();save();window.open(window.location+\"/..\"+getElemenByNameOfChiled(this.parentElement,\"urlpattern\")[0].value)''> OPEN </button>\n</div>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {},                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "585cab6a-2b5c-4033-b188-16471ebcf326",                                    "output": "input_1",                                    "points": []                                }                            ]                        }                    },                    "pos_x": 415,                    "pos_y": 344                },                "585cab6a-2b5c-4033-b188-16471ebcf326": {                    "id": "585cab6a-2b5c-4033-b188-16471ebcf326",                    "name": "",                    "data": {                        "name_box": "",                        "script": "ValidateToken1",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div>Validate Token</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> Validate Token</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n    \n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "4f953c34-019c-4586-875d-72c3171f22f3",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "517d034c-798e-452c-8a96-0ac3e9c9469b",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 680,                    "pos_y": 344                },                "517d034c-798e-452c-8a96-0ac3e9c9469b": {                    "id": "517d034c-798e-452c-8a96-0ac3e9c9469b",                    "name": "",                    "data": {                        "code": "function main(){\n\tc.JSON(200,{\"idp\":\"nflow2\"})\n}",                        "name_box": "",                        "nflow_auth": "false",                        "type": "js"                    },                    "class": "",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div><span class=\"material-icons\">source</span>JS Code</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JS Code</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n    <textarea class=\"hide_component\" name=\"code\" df-code></textarea>\n    <button class=\"btn-export\" name=\"open\" onclick=''open_coder(this)''> CODE </button>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "585cab6a-2b5c-4033-b188-16471ebcf326",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {},                    "pos_x": 920,                    "pos_y": 344                },                "45556eba-39f0-46d8-8175-b4463ad3f3c3": {                    "id": "45556eba-39f0-46d8-8175-b4463ad3f3c3",                    "name": "_start_http",                    "data": {                        "method": "ANY",                        "name_box": "",                        "nflow_auth": "false",                        "type": "starter",                        "urlpattern": ""                    },                    "class": "_start_http",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkcyan;\"></div><span class=\"material-icons\">http</span>Http Start</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"http\"></i> Http Start</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n<p>Url</p>\n<input type=\"text\"  name=\"urlpattern\" df-urlpattern>\n\n<p>Choose Method:</p>\n<select name=\"method\" df-method>\n  <option value=\"GET\">GET</option>\n  <option value=\"POST\">POST</option>\n  <option value=\"PUT\">PUT</option>\n  <option value=\"PATCH\">PATCH</option>\n  <option value=\"DELETE\">DELETE</option>\n  <option value=\"ANY\">ANY</option>\n</select>\n<button  class=\"btn-export\" onclick=''setFieldNode();save();window.open(window.location+\"/..\"+getElemenByNameOfChiled(this.parentElement,\"urlpattern\")[0].value)''> OPEN </button>\n</div>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {},                    "outputs": {                        "output_1": {                            "connections": []                        }                    },                    "pos_x": 1160,                    "pos_y": 344                },                "c5ad3c3f-679b-4bb2-914b-f19b651ff333": {                    "id": "c5ad3c3f-679b-4bb2-914b-f19b651ff333",                    "name": "_start_http",                    "data": {                        "method": "ANY",                        "name_box": "",                        "nflow_auth": "false",                        "type": "starter",                        "urlpattern": "/twilio"                    },                    "class": "_start_http",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkcyan;\"></div><span class=\"material-icons\">http</span>Http Start</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"http\"></i> Http Start</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<div class=\"nflow_auth\">Auth:<input type=\"checkbox\" df-nflow_auth=\"false\" name=\"nflow_auth\"></div>\n<hr/>\n<p>Url</p>\n<input type=\"text\"  name=\"urlpattern\" df-urlpattern>\n\n<p>Choose Method:</p>\n<select name=\"method\" df-method>\n  <option value=\"GET\">GET</option>\n  <option value=\"POST\">POST</option>\n  <option value=\"PUT\">PUT</option>\n  <option value=\"PATCH\">PATCH</option>\n  <option value=\"DELETE\">DELETE</option>\n  <option value=\"ANY\">ANY</option>\n</select>\n<button  class=\"btn-export\" onclick=''setFieldNode();save();window.open(window.location+\"/..\"+getElemenByNameOfChiled(this.parentElement,\"urlpattern\")[0].value)''> OPEN </button>\n</div>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {},                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "81f37698-1189-4ea0-b4dd-5ca4feda5312",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 420,                    "pos_y": 465                },                "81f37698-1189-4ea0-b4dd-5ca4feda5312": {                    "id": "81f37698-1189-4ea0-b4dd-5ca4feda5312",                    "name": "form",                    "data": {                        "html_form": "<div>\n  <label for=\"phone\">Telefono:</label>\n  <input type=\"text\" id=\"phone\" name=\"phone\" required>\n  <input type=\"submit\" value=\"Siguiente\">\n</div>",                        "name_box": "Phone",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": "form1"                    },                    "class": "form",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "c5ad3c3f-679b-4bb2-914b-f19b651ff333",                                    "input": "output_1"                                },                                {                                    "node": "ee334b95-acb5-4b91-9216-c605df952fda",                                    "input": "output_2"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "ee334b95-acb5-4b91-9216-c605df952fda",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 680,                    "pos_y": 465                },                "ee334b95-acb5-4b91-9216-c605df952fda": {                    "id": "ee334b95-acb5-4b91-9216-c605df952fda",                    "name": "twilio_send_sms",                    "data": {                        "name_box": "",                        "script": "twilio_send_sms",                        "type": "js",                        "variable": ""                    },                    "class": "twilio_send_sms",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div>Twilio Send SMS</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> Twilio Send SMS</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<br>\nEnter the name of the payload variable where the phone will arrive (by default it is \"phone\") \n<br><br>\nVariable Name: <input type=\"text\" name=\"variable\" df-variable=\"\" class=\"nflow_field\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "81f37698-1189-4ea0-b4dd-5ca4feda5312",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "cfd9f6b5-76a9-42b9-8358-48741cb88d5d",                                    "output": "input_1"                                }                            ]                        },                        "output_2": {                            "connections": [                                {                                    "node": "81f37698-1189-4ea0-b4dd-5ca4feda5312",                                    "output": "input_1",                                    "points": [                                        {                                            "pos_x": 1140.000015258789,                                            "pos_y": 598                                        },                                        {                                            "pos_x": 666.0000152587891,                                            "pos_y": 595                                        }                                    ]                                }                            ]                        }                    },                    "pos_x": 920,                    "pos_y": 465                },                "cfd9f6b5-76a9-42b9-8358-48741cb88d5d": {                    "id": "cfd9f6b5-76a9-42b9-8358-48741cb88d5d",                    "name": "form",                    "data": {                        "html_form": "<div>\n  <label for=\"code\">Code:</label>\n  <input type=\"text\" id=\"code\" name=\"code\" required>\n  <input type=\"submit\" value=\"Siguiente\">\n</div>",                        "name_box": "Code",                        "script": "form",                        "template": "form1",                        "type": "js",                        "templateui": "form1"                    },                    "class": "form",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkorange;\"></div><span class=\"material-icons\">book</span>Form</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"book\"></i> Form</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<textarea class=\"hide_component\" name=\"html_form\" df-html_form=\"<div><input type=''input'' name=''n1''/><input type=''submit''/></div>\"> </textarea>\n<button class=\"btn-export\" onclick=\"open_coder(this, `htmlmixed`)\"> CODE</button>\n<input type=\"hidden\" df-template=\"form1\" name=\"template\">\n\n<select name=\"templateui\" onchange=\"document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value = this.value\">\n</select>\n<button class=\"\" onclick=\"open_template(this,document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value)\"> Template Code</button>\n<br><br>\n<button class=\"\" onclick=\"var name_new_template = prompt(''Please enter the name of template'', ''template1''); if (name_new_template != null) { create_template(name_new_template,''{{.form_code | unescapeHTML}}'')}\"> New Template </button>\n\n<button class=\"\" onclick=\"if (confirm(''Are you secure remove template?'')){ delete_template(document.querySelector(''#panel_prop > div > div.box > input[name=\\''template\\'']'').value )}\">\n  Remove Template</button>\n\n<script id=\"script_prop\">\nfetch(\"/nflow/templates\")\n    .then(response => response.json())\n    .then(data => {\n        var s = document.querySelector(\"#panel_prop > div > div.box > select[name=''templateui'']\")\n\t\tvar val = editor.getNodeFromId(id_box_in_prop).data[\"template\"]\n        console.log(\"Val:\"+val);\n        for (var i in data){\n            var item = data[i]\n            var checked= undefined;\n            if (item[\"name\"] == val){\n              checked = true;\n            }\n            s.add(new Option(item[\"name\"], item[\"name\"]),checked)\n            console.log(item)\n        }\n  \t\ts.value=val\n  \t\n  \t});\n</script>\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "ee334b95-acb5-4b91-9216-c605df952fda",                                    "input": "output_1"                                },                                {                                    "node": "6cb810a8-f183-4410-bae8-80b05dc889cd",                                    "input": "output_2"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "6cb810a8-f183-4410-bae8-80b05dc889cd",                                    "output": "input_1"                                }                            ]                        }                    },                    "pos_x": 1180,                    "pos_y": 465                },                "dd726efc-d68b-410d-b17b-a3c75ccff4f6": {                    "id": "dd726efc-d68b-410d-b17b-a3c75ccff4f6",                    "name": "json",                    "data": {                        "field": "",                        "http_code": "200",                        "name_box": "Done",                        "script": "json",                        "type": "js"                    },                    "class": "json",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkviolet;\"></div><span class=\"material-icons\">source</span>JSON Render</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"source\"></i> JSON Render</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n<input type=\"text\" name=\"field\" df-field=\"\">\n<input type=\"number\" name=\"http_code\" df-http_code=\"200\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "6cb810a8-f183-4410-bae8-80b05dc889cd",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {},                    "pos_x": 1710,                    "pos_y": 465                },                "6cb810a8-f183-4410-bae8-80b05dc889cd": {                    "id": "6cb810a8-f183-4410-bae8-80b05dc889cd",                    "name": "twilio_validate_sms",                    "data": {                        "name_box": "",                        "script": "twilio_validate_sms",                        "type": "js",                        "variable": ""                    },                    "class": "twilio_validate_sms",                    "html": "<div>\n  \n\n        <div class=\"title-box\">      <div class=\"mark_color_box\" style=\"background:darkred;\"></div>Twilio Validate SMS</div>\n            <div>\n                <input type=\"text\" value=\"\" name=\"input_box\" df-name_box=\"\" class=\"df_name_box\"\n                readOnly\n                />\n            </div>\n            </div>\n            <div class=\"form_prop_of_box\" style=\"display:none\">\n                <div>\n\t\t<div class=\"title-box\"><i class=\"\"></i> Twilio Validate SMS</div>\n\t\t<div class=\"box\">\n\t\t  Name:<input type=\"text\" name=\"name_box\" df-name_box=\"\" class=\"nflow_field\">\n<hr>\n\n<!-- add your form -->\n<br>\nEnter the name of the payload variable where the code will arrive (by default it is \"code\") \n<br><br>\nVariable Name: <input type=\"text\" name=\"variable\" df-variable=\"\" class=\"nflow_field\">\n\t\t</div>\n\t  </div>\n            </div>\n        ",                    "typenode": false,                    "inputs": {                        "input_1": {                            "connections": [                                {                                    "node": "cfd9f6b5-76a9-42b9-8358-48741cb88d5d",                                    "input": "output_1"                                }                            ]                        }                    },                    "outputs": {                        "output_1": {                            "connections": [                                {                                    "node": "dd726efc-d68b-410d-b17b-a3c75ccff4f6",                                    "output": "input_1"                                }                            ]                        },                        "output_2": {                            "connections": [                                {                                    "node": "cfd9f6b5-76a9-42b9-8358-48741cb88d5d",                                    "output": "input_1",                                    "points": [                                        {                                            "pos_x": 1658.0000305175781,                                            "pos_y": 597.000013589859                                        },                                        {                                            "pos_x": 1168.0000305175781,                                            "pos_y": 596.000013589859                                        }                                    ]                                }                            ]                        }                    },                    "pos_x": 1440,                    "pos_y": 465                }            }        }    }}', 'function log () {
  profile = get_profile()
  console.log(
   ">>",
    "User:",profile["username"],
    "BoxID:", box_id,
    "BoxName:", box_name, 
    "BoxType:", box_type, 
    "Time:",duration_ms, "ms"
  )
}

function auth(){
    if (!exist_profile() ) {
        next = "login"
        return
    }
}', NULL);

-- Inserts de queries
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryInsertTemplate', 'INSERT INTO template(content,name) values($1,$2)');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryUpdateTemplate', 'UPDATE template SET content = $1 WHERE name = $2');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryGetTemplates', 'SELECT id, name, content  FROM template order by name');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryGetTemplateCount', 'SELECT  count(*) count  FROM template t WHERE t.name= $1');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryGetTemplate', 'SELECT id, name , content FROM template t  WHERE t.name = $1');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryInsertLog', 'INSERT INTO tracker (log_id, box_id, box_name, box_type, url, username, connection_next, duration, order_box, payload, ip,real_ip,user_agent,query_param,hostname,host) VALUES ($1,$2,$3,$4,$5,$6,$7,$8, $9, $10, $11, $12, $13, $14, $15, $16)');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryDeleteModule', 'DELETE FROM modules WHERE name = $1');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryInsertModule', 'INSERT INTO modules (name, form, mod, code) VALUES ($1,$2,$3, $4)');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryUpdateApp', 'UPDATE nflow SET json = $1 WHERE name = $2');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryUpdateCodeModuleByName', 'UPDATE modules SET code = $1 WHERE name = $2');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryUpdateFormModuleByName', 'UPDATE modules SET form = $1 WHERE name = $2');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryUpdateModModuleByName', 'UPDATE modules SET mod = $1 WHERE name = $2');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryGetModuleByName', 'SELECT form, mod, code FROM modules WHERE name = $1');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryCountModulesByName', 'SELECT COUNT(*) c FROM modules WHERE name = $1');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryGetModules', 'SELECT form, mod, code, name FROM modules order by upper(name) desc');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryGetApp', 'SELECT json , default_js FROM nflow  where name = $1');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryGetUser', 'SELECT id, username,password,rol, active FROM users WHERE username = $1');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryGetToken', 'SELECT id, name, token, start, expired, active, header, token_type FROM api_tokens a where  a.name = $1');
INSERT INTO public.queries (id, name, query) VALUES (DEFAULT, 'QueryDeleteTemplate', 'DELETE FROM template  WHERE name = $1');

-- Inserts de templates
INSERT INTO public.template (id, name, content) VALUES (DEFAULT, 'form1', '<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Panel</title>
	<script type="text/javascript">
       
      
      //sessionStorage.setItem(''myData'', JSON.stringify({ key: ''value'' }));

      // Agrega un estado al historial para permitir la deteccin del botn de retroceso
      history.pushState({ page: 1 }, "state1", "?f=run");

      window.onpopstate = function(event) {
      // Detecta el intento de navegar hacia atrs y vuelve a agregar el mismo estado
      history.pushState({ page: 1 }, "state1", "?f=run");

      // Recupera tus datos si es necesario
      //var myData = JSON.parse(sessionStorage.getItem(''myData''));
};
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
        }
        .navbar {
            background-color: #4CAF50;
            overflow: hidden;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 16px;
        }
        .navbar a {
            float: right;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }
        .navbar p {
            color: white;
            margin: 0;
            padding: 14px 16px;
        }
        .profile-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
            margin: auto;
        }
        .profile-container input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .profile-container input[type=''submit''] {
            background-color: #4CAF50;
            color: white;
            border: none;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <p>{{index .profile "username"}}</p>
        <a href="/logout" class="logout">logout</a>
    </div>
  	<br><br>
    <div class="profile-container">
        <form method="post" id="form_main">
            <input type="hidden" name="nflow_next_node_run" value="{{.next}}" />
             {{.form_code | unescapeHTML }} 
        </form>
    </div>
</body>
</html>');
INSERT INTO public.template (id, name, content) VALUES (DEFAULT, 'form2', ' <!DOCTYPE html>
 <html lang="en">
 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=}, initial-scale=1.0">
    <title>Fomrs</title>
 </head>
 <body>
   <form method=''post'' id=''form_main'' > 
      <input type=''hidden'' name=''nflow_next_node_run'' value=''{{.next}}'' />
      {{.form_code | unescapeHTML }} 
   </form>      
 </body>
 </html>
');
INSERT INTO public.template (id, name, content) VALUES (DEFAULT, 'login_template', '<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .login-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
        }
        .login-container input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .login-container input[type=''submit''] {
            background-color: #4CAF50;
            color: white;
            border: none;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Login</h2>
      <form method=''post'' id=''form_main'' > 
   			<input type=''hidden'' name=''nflow_next_node_run'' value=''{{.next}}'' />
   			{{.form_code | unescapeHTML }} 
	  </form> 
        
    </div>
</body>
</html>
');
INSERT INTO public.template (id, name, content) VALUES (DEFAULT, 'form3', 'Username:{{index .profile "username"}}  -  <a href="/logout">logout</a>
<form method=''post'' id=''form_main'' > 
   <input type=''hidden'' name=''nflow_next_node_run'' value=''{{.next}}'' />
   {{.form_code | unescapeHTML }} 
</form>   ');
INSERT INTO public.template (id, name, content) VALUES (DEFAULT, 'logout_template', '<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .login-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
        }
        .login-container input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .login-container input[type=''submit''] {
            background-color: #4CAF50;
            color: white;
            border: none;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Logout</h2>
      	{{.form_code | unescapeHTML }} 
        
    </div>
</body>
</html>
');

-- Inserts de users
INSERT INTO public.users (id, username, password, rol, active) VALUES (DEFAULT, 'dev1', '271057c52cda3957b2be61d6744ea10e4fc90e4208b9bfad12fadb1a38c4f62c', 'ROL_DEV', true);
INSERT INTO public.users (id, username, password, rol, active) VALUES (DEFAULT, 'admin', '30bb8411dd0cbf96b10a52371f7b3be1690f7afa16c3bd7bc7d02c0e2854768d', 'ROL_ADMIN', true);
INSERT INTO public.users (id, username, password, rol, active) VALUES (DEFAULT, 'user1', 'eb586a1288dc629dc79f72f17d818ea4b3b7bfd503bc29ea22d70add55bec09a', 'ROL_USER', true);
